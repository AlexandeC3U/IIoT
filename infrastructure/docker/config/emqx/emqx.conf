## NEXUS Edge - EMQX Configuration
## https://www.emqx.io/docs/en/v5.0/configuration/configuration.html

## Node configuration
node {
  name = "emqx@emqx"
  cookie = "nexus_secret_cookie"
  data_dir = "/opt/emqx/data"
}

## Cluster settings (single node for development)
cluster {
  discovery_strategy = static
}

## Listeners
listeners.tcp.default {
  bind = "0.0.0.0:1883"
  max_connections = 100000
}

listeners.ws.default {
  bind = "0.0.0.0:8083"
}

## Dashboard
dashboard {
  listeners.http {
    bind = "0.0.0.0:18083"
  }
  default_username = "admin"
  default_password = "public"
}

## Authentication - Allow anonymous for development
## IMPORTANT: Disable in production!
authentication = []

authorization {
  no_match = allow
  deny_action = ignore
  cache {
    enable = true
    max_size = 1024
    ttl = 1m
  }
}

## MQTT settings
mqtt {
  max_packet_size = 10MB
  max_topic_levels = 10
  max_qos_allowed = 2
  retain_available = true
  wildcard_subscription = true
  shared_subscription = true
}

## Logging
log.console {
  enable = true
  level = warning
}

